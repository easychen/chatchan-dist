åœ¨çº¿ç‰ˆæœ€æ–°åœ°å€ [c2.level06.com](https://c2.level06.com)

# Chaté…±ç‹¬ç«‹éƒ¨ç½²ç‰ˆ

> ğŸˆ Chaté…±å®šåˆ¶ç‰ˆå‘å¸ƒï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨èé“¾æ¥ã€é™åˆ¶ä½¿ç”¨çš„Keyã€‚[è¯¦æƒ…è¯·ç‚¹æ­¤æŸ¥çœ‹](https://a.ftqq.com/2023/04/24/chatyou-custom-platform/)ã€‚

## é»˜è®¤ç•Œé¢

![](images/20230404174420.png)

## æœ€è¿‘æ›´æ–°

v1.0.14

æ·»åŠ api2d apiåœ°å€åˆ‡æ¢æŒ‰é’®

v1.0.13

æ”¯æŒ3.5 16Kï¼Œä»£ç å—æ”¯æŒä¸€é”®å¤åˆ¶ï¼Œå»æ‰å¯¹è¯å†…å®¹åŒå‡»å¡«å›å‘å¸ƒç©º

v1.0.12 

è¾“å…¥æ¡†æ ¹æ®å†…å®¹è‡ªåŠ¨ä¼¸ç¼©ï¼Œæµå¼è¾“å‡ºæ”¯æŒå®æ—¶æ¸²æŸ“Markdownï¼ˆè€Œä¸æ˜¯ç­‰è¾“å…¥å®Œæˆåå†æ¸²æŸ“ï¼‰

v1.0.11

ä¿®æ­£åˆ‡æ¢çª—å£æ—¶ï¼Œé‡å¤å‘é€è¯·æ±‚çš„bugã€‚

v1.0.10

æ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨è¯­éŸ³æœ—è¯»ï¼ˆä»…API2Dçš„Keyï¼‰

![](images/20230504102347.png)

v1.0.8

å…¼å®¹éƒ¨åˆ†æ— æ³•æ”¯æŒ wasm çš„ hosting ç¯å¢ƒã€‚ä½†å…¼å®¹çš„æ–¹å¼æ˜¯ç›´æ¥è·³è¿‡ï¼Œå› æ­¤å¯èƒ½å‡ºç°å†…å®¹è¶…é•¿å¯¼è‡´çš„400é”™è¯¯ï¼Œå»ºè®®æŒ‰ä¸‹è¾¹çš„æç¤ºæ·»åŠ å¯¹ Wasm MIME çš„æ”¯æŒä»¥è·å–å®Œæ•´çš„åŠŸèƒ½ã€‚


> ğŸš’ BreakingChange: 1.0.7 å¯ç”¨äº† wasm æ¥è®¡ç®— tokenï¼Œæœ¬åœ°æµè§ˆå™¨å’Œéƒ¨åˆ†ä¸»æœºç¯å¢ƒä¸æ”¯æŒè¯¥ç±»å‹çš„æ–‡ä»¶ï¼Œéœ€è¦æ‰‹å·¥æ·»åŠ æ”¯æŒï¼Œå…·ä½“æ–¹æ³•è¯·è¯¢é—®GPTã€Œå¦‚ä½•ç»™xxx(ä½ ä½¿ç”¨çš„ç±»å‹æ¯”å¦‚apache/nginx)æœåŠ¡å™¨æ·»åŠ MIME TYPE ä»¥æ”¯æŒ wasmã€

![](images/20230420105053.png)

v1.0.7

- Tokenå¯ä»¥ç²¾ç¡®è®¡ç®—äº†ï¼Œå†…å®¹è¶…é•¿ä¸ä¼šå†å‡ºç°400é”™
- æ”¯æŒåˆ é™¤å•æ¡èŠå¤©å†…å®¹
- è½½å…¥å¯¹è¯è®°å½•æ·»åŠ æ’¤é”€æç¤º

v1.0.6 

- æ”¯æŒæ·»åŠ å¸¸ç”¨æç¤ºè¯ã€ç‚¹å‡»åä¼šè‡ªåŠ¨å¡«å…¥è¾“å…¥æ¡†
- ç‹¬ç«‹éƒ¨ç½²ç‰ˆæ”¯æŒè®¾ç½®é»˜è®¤çš„è´¦å·ã€æ¨¡å‹å‚æ•°ã€å’ŒèŠå¤©åŠ©æ‰‹ä¿¡æ¯

### å¸¸ç”¨æç¤ºè¯ã€ç‚¹å‡»åä¼šè‡ªåŠ¨å¡«å…¥è¾“å…¥æ¡†

![](images/20230413115647.png)

### ç‹¬ç«‹éƒ¨ç½²ç‰ˆï¼Œæ”¯æŒè®¾ç½®é»˜è®¤è´¦å·ã€æ¨¡å‹å‚æ•°ã€å’ŒèŠå¤©åŠ©æ‰‹ä¿¡æ¯

è§£å‹ build.zip åï¼Œç¼–è¾‘ç›®å½•ä¸‹çš„ `default.json` æ–‡ä»¶ï¼Œä¿®æ”¹å¯¹åº”é¡¹å†…å®¹åä¿å­˜å³å¯ã€‚

> âš ï¸ ä½¿ç”¨æœ¬åœ°æµè§ˆå™¨æ— æ³•è½½å…¥é…ç½®ï¼Œéœ€è¦å¯åŠ¨httpæœåŠ¡

```json
{
    "app_name": "",
    "api_key": "",
    "api_url": "",
    "chat_model": "",
    "chat_max_tokens": "",
    "chat_temperature": "",
    "chat_timeout": "",
    "chat_system_prompt": "",
    "chat_user_prompt": "",
    "chat_character_url": "",
    "chat_character_opacity": 80
}
```
æ¯ä¸€é¡¹çš„æ„ä¹‰å¦‚ä¸‹ï¼š

- "app_name": åº”ç”¨ç¨‹åºåç§°ï¼Œç”¨äºæ ‡è¯†è¯¥å®¢æˆ·ç«¯çš„åç§°ã€‚
- "api_key": OpenAI/Api2d Keyã€‚
- "api_url": APIçš„URLåœ°å€ï¼ŒOpenAIçš„æ˜¯ https://api.openai.com ; Api2dçš„æ˜¯ https://openai.api2d.net ã€‚
- "chat_model": GPTæ¨¡å‹çš„åç§°ï¼Œ`gpt-3.5-turbo` æˆ–è€… `gpt-4` ã€‚
- "chat_max_tokens": æ¯ä¸ªèŠå¤©å›å¤çš„æœ€å¤§æ ‡è®°æ•°ã€‚
- "chat_temperature": ç”¨äºæ§åˆ¶ç”Ÿæˆå›å¤çš„éšæœºæ€§çš„æ¸©åº¦å€¼ã€‚
- "chat_timeout": èŠå¤©æ¥å£è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚
- "chat_system_prompt": ç³»ç»Ÿæç¤ºï¼Œç”¨äºæŒ‡å®šç³»ç»Ÿç”Ÿæˆçš„èŠå¤©å¼€å§‹è¯­ã€‚
- "chat_user_prompt": ç”¨æˆ·æç¤ºï¼Œç”¨äºæŒ‡å®šç”¨æˆ·è¾“å…¥çš„èŠå¤©å¼€å§‹è¯­ã€‚
- "chat_character_url": èŠå¤©è§’è‰²çš„URLåœ°å€ï¼Œç”¨äºæŒ‡å®šèŠå¤©æ—¶æ˜¾ç¤ºçš„è§’è‰²å›¾ç‰‡ã€‚
- "chat_character_opacity": èŠå¤©è§’è‰²çš„ä¸é€æ˜åº¦ï¼Œç”¨äºæŒ‡å®šèŠå¤©æ—¶æ˜¾ç¤ºçš„è§’è‰²å›¾ç‰‡çš„é€æ˜åº¦ã€‚


v1.0.5 

![](images/20230408130332.png)

- æ”¯æŒä¸Šä¼ å’Œä¸‹è½½å¯¹è¯è®°å½•
- æ”¯æŒé‡æ–°ç”Ÿæˆç­”æ¡ˆ
- Dockerç‰ˆè‡ªå¸¦OpenAIä»£ç†ï¼Œè¯·æŠŠè‡ªå®šä¹‰åœ°å€å¡«ä¸º `http://ä½ çš„IP:ä½ çš„ç«¯å£`ï¼Œç„¶åè¯·æ±‚ä¼šä»æœåŠ¡å™¨ç«¯å‘é€åˆ°`api.openai.com`ã€‚ï¼ˆè¯·ç¡®ä¿Dockeréƒ¨ç½²çš„ç¯å¢ƒå¯ä»¥è®¿é—®api.openai.comï¼‰

ä»£ç†æ”¯æŒè®¿é—®å¯†ç ã€å†…å®¹å®‰å…¨ã€è¶…æ—¶è®¾ç½®ç­‰ï¼Œ[è¯·ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹è¯¦ç»†çš„ç¯å¢ƒå˜é‡](https://github.com/easychen/openai-api-proxy)


v1.0.2 

- æ”¯æŒè‡ªåŠ¨ä¿å­˜å¯¹è¯ï¼Œæ”¯æŒæ€»ç»“å¯¹è¯æ ‡é¢˜

![](images/20230404174121.png)

- æ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯

![](images/20230404174028.png)


Chaté…±ç½‘é¡µç‰ˆï¼ˆ[c2.level06.com](https://c2.level06.com)ï¼‰éƒ¨ç½²åœ¨æµ·å¤–æœåŠ¡å™¨ï¼Œæœ‰éƒ¨åˆ†åŒå­¦è®¿é—®ä¸äº†ï¼Œå› æ­¤æä¾›ä¸€ä¸ªç‹¬ç«‹éƒ¨ç½²ç‰ˆï¼Œä½ å¯ä»¥å°†å®ƒéƒ¨ç½²åˆ°ä»»ä½•æœåŠ¡å™¨ï¼Œç”šè‡³åœ¨ç”µè„‘ç›´æ¥ç”¨æ”¯æŒæµè§ˆæœ¬åœ°ç½‘é¡µçš„æµè§ˆå™¨æ‰“å¼€ä½¿ç”¨ã€‚

## ä½¿ç”¨æ–¹æ³•

1. ä¸‹è½½ [build.zip](./build.zip) 
1. è§£å‹åï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ç½‘ç«™ï¼Œè®¿é—® index.html å³å¯ä½¿ç”¨ï¼Œå¦‚æœä½ çš„æµè§ˆå™¨ä¸æ”¯æŒæŸ¥çœ‹æœ¬åœ°ç½‘é¡µï¼Œé‚£ä¹ˆå¯ä»¥ä¸‹è½½æˆ‘æ‰“åŒ…è¿™äº›ç½‘é¡µçš„æ¡Œé¢å®¢æˆ·ç«¯ï¼ˆ é“¾æ¥ï¼šhttps://share.weiyun.com/jXtYKbZS å¯†ç ï¼šchatok ï¼‰
1. å¦‚æœè¦ç»™å…¶ä»–åŒå­¦ä½¿ç”¨ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œç„¶åè®¿é—®å¯¹åº”ç›®å½•å°±è¡Œã€‚

## Dockerç‰ˆ

è™½ç„¶æˆ‘è§‰å¾—é™æ€ç½‘é¡µæ›´ç®€å•ï¼Œä½†æœ‰åŒå­¦è¡¨ç¤ºæƒ³è¦dockerç‰ˆï¼Œäºæ˜¯æˆ‘è®©GPTå†™äº†ä¸ªDockerfileï¼Œäºæ˜¯å°±æœ‰äº†dockerç‰ˆã€‚

ä½¿ç”¨æ–¹æ³•ï¼š

ä¸è®¾ç½®é»˜è®¤ä¿¡æ¯ï¼š

```bash
docker run -d -p 9000:9000 easychen/chatchan:latest
```

è®¾ç½®é»˜è®¤ä¿¡æ¯ï¼Œé¦–å…ˆè¦ä¿è¯è¿è¡Œå‘½ä»¤çš„ç›®å½•ä¸‹å­˜åœ¨ `default.json`ï¼š
```bash
docker run -d -p 9000:9000 -v $(pwd)/default.json:/data/web/default.json easychen/chatchan:latest
```

å¯¹è¯æˆªå›¾ï¼š

![](images/20230406173224.png)

